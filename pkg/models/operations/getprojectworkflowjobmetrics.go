// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package operations

import (
	"encoding/json"
	"fmt"
	"net/http"
	"time"
)

// GetProjectWorkflowJobMetricsReportingWindowEnum - The time window used to calculate summary metrics.
type GetProjectWorkflowJobMetricsReportingWindowEnum string

const (
	GetProjectWorkflowJobMetricsReportingWindowEnumLast7Days   GetProjectWorkflowJobMetricsReportingWindowEnum = "last-7-days"
	GetProjectWorkflowJobMetricsReportingWindowEnumLast90Days  GetProjectWorkflowJobMetricsReportingWindowEnum = "last-90-days"
	GetProjectWorkflowJobMetricsReportingWindowEnumLast24Hours GetProjectWorkflowJobMetricsReportingWindowEnum = "last-24-hours"
	GetProjectWorkflowJobMetricsReportingWindowEnumLast30Days  GetProjectWorkflowJobMetricsReportingWindowEnum = "last-30-days"
	GetProjectWorkflowJobMetricsReportingWindowEnumLast60Days  GetProjectWorkflowJobMetricsReportingWindowEnum = "last-60-days"
)

func (e GetProjectWorkflowJobMetricsReportingWindowEnum) ToPointer() *GetProjectWorkflowJobMetricsReportingWindowEnum {
	return &e
}

func (e *GetProjectWorkflowJobMetricsReportingWindowEnum) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "last-7-days":
		fallthrough
	case "last-90-days":
		fallthrough
	case "last-24-hours":
		fallthrough
	case "last-30-days":
		fallthrough
	case "last-60-days":
		*e = GetProjectWorkflowJobMetricsReportingWindowEnum(v)
		return nil
	default:
		return fmt.Errorf("invalid value for GetProjectWorkflowJobMetricsReportingWindowEnum: %v", v)
	}
}

type GetProjectWorkflowJobMetricsRequest struct {
	// Whether to retrieve data for all branches combined. Use either this parameter OR the branch name parameter.
	AllBranches *bool `queryParam:"style=form,explode=true,name=all-branches"`
	// The name of a vcs branch. If not passed we will scope the API call to the default branch.
	Branch *string `queryParam:"style=form,explode=true,name=branch"`
	// A token to retrieve the next page of results.
	PageToken *string `queryParam:"style=form,explode=true,name=page-token"`
	// Project slug in the form `vcs-slug/org-name/repo-name`. The `/` characters may be URL-escaped.
	ProjectSlug string `pathParam:"style=simple,explode=false,name=project-slug"`
	// The time window used to calculate summary metrics.
	ReportingWindow *GetProjectWorkflowJobMetricsReportingWindowEnum `queryParam:"style=form,explode=true,name=reporting-window"`
	// The name of the workflow.
	WorkflowName string `pathParam:"style=simple,explode=false,name=workflow-name"`
}

// GetProjectWorkflowJobMetricsDefaultApplicationJSON - Error response.
type GetProjectWorkflowJobMetricsDefaultApplicationJSON struct {
	Message *string `json:"message,omitempty"`
}

// GetProjectWorkflowJobMetrics200ApplicationJSONItemsMetricsDurationMetrics - Metrics relating to the duration of runs for a workflow job.
type GetProjectWorkflowJobMetrics200ApplicationJSONItemsMetricsDurationMetrics struct {
	// The max duration, in seconds, among a group of runs.
	Max int64 `json:"max"`
	// The mean duration, in seconds, among a group of runs.
	Mean int64 `json:"mean"`
	// The median duration, in seconds, among a group of runs.
	Median int64 `json:"median"`
	// The minimum duration, in seconds, among a group of runs.
	Min int64 `json:"min"`
	// The 95th percentile duration, in seconds, among a group of runs.
	P95 int64 `json:"p95"`
	// The standard deviation, in seconds, among a group of runs.
	StandardDeviation float32 `json:"standard_deviation"`
}

// GetProjectWorkflowJobMetrics200ApplicationJSONItemsMetrics - Metrics relating to a workflow job's runs.
type GetProjectWorkflowJobMetrics200ApplicationJSONItemsMetrics struct {
	// Metrics relating to the duration of runs for a workflow job.
	DurationMetrics GetProjectWorkflowJobMetrics200ApplicationJSONItemsMetricsDurationMetrics `json:"duration_metrics"`
	// The number of failed runs.
	FailedRuns  int64   `json:"failed_runs"`
	SuccessRate float32 `json:"success_rate"`
	// The number of successful runs.
	SuccessfulRuns int64 `json:"successful_runs"`
	// The average number of runs per day.
	Throughput float32 `json:"throughput"`
	// The total credits consumed by the job in the aggregation window. Note that Insights is not a real time financial reporting tool and should not be used for credit reporting.
	TotalCreditsUsed int64 `json:"total_credits_used"`
	// The total number of runs.
	TotalRuns int64 `json:"total_runs"`
}

type GetProjectWorkflowJobMetrics200ApplicationJSONItems struct {
	// Metrics relating to a workflow job's runs.
	Metrics GetProjectWorkflowJobMetrics200ApplicationJSONItemsMetrics `json:"metrics"`
	// The name of the job.
	Name string `json:"name"`
	// The end of the aggregation window for job metrics.
	WindowEnd time.Time `json:"window_end"`
	// The start of the aggregation window for job metrics.
	WindowStart time.Time `json:"window_start"`
}

// GetProjectWorkflowJobMetrics200ApplicationJSON - Paginated workflow job summary metrics.
type GetProjectWorkflowJobMetrics200ApplicationJSON struct {
	// Job summary metrics.
	Items []GetProjectWorkflowJobMetrics200ApplicationJSONItems `json:"items"`
	// A token to pass as a `page-token` query parameter to return the next page of results.
	NextPageToken string `json:"next_page_token"`
}

type GetProjectWorkflowJobMetricsResponse struct {
	ContentType string
	StatusCode  int
	RawResponse *http.Response
	// A paginated list of summary metrics by workflow job.
	GetProjectWorkflowJobMetrics200ApplicationJSONObject *GetProjectWorkflowJobMetrics200ApplicationJSON
	// Error response.
	GetProjectWorkflowJobMetricsDefaultApplicationJSONObject *GetProjectWorkflowJobMetricsDefaultApplicationJSON
}
